{
	"info": {
		"name": "marina-api",
		"_postman_id": "213bf9b8-8fcb-e0b4-c2db-b04a2dc52064",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Pre-Clean",
			"description": "",
			"item": [
				{
					"name": "CLEAN UP - Boats 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "61460979-1234-4d56-b206-8aa5253c9f66",
								"type": "text/javascript",
								"exec": [
									"// Clear Boats",
									"pm.environment.set(\"numBoats\", \"\");",
									"pm.environment.set(\"boatUrl\", \"\");",
									"",
									"// Clean up ",
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response has json body\", function () {",
									"    pm.response.to.not.be.error;",
									"    pm.response.to.have.jsonBody('');",
									"    pm.response.to.not.have.jsonBody('error');",
									"});",
									"",
									"var numBoats = Object.keys(pm.response.json()).length;",
									"if (numBoats === 0) {",
									"    postman.setNextRequest(\"TEST 1: GET /boats/\");",
									"    // postman.setNextRequest(\"CLEAN UP - Slips 1\");",
									"    pm.environment.set(\"boatUrl\", \"\");",
									"    console.log(\"All Boats Deleted\");",
									"}",
									"else {",
									"    var boatUrl = pm.response.json()[0].url;",
									"    pm.environment.set(\"boatUrl\", boatUrl);",
									"    pm.expect(boatUrl).to.equal(pm.environment.get(\"boatUrl\"));",
									"    console.log(\"More Boats: \" + numBoats);",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{domain}}/boats/",
							"host": [
								"{{domain}}"
							],
							"path": [
								"boats",
								""
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "CLEAN UP - Boats 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c06c2227-49e5-428b-b687-2d5b8fc008e7",
								"type": "text/javascript",
								"exec": [
									"// Delete boat and Repeat",
									"pm.test(\"response is 204\", function () {",
									"    pm.response.to.have.status(204);",
									"    postman.setNextRequest(\"CLEAN UP - Boats 1\");",
									"});"
								]
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "DELETE",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{boatUrl}}",
							"host": [
								"{{boatUrl}}"
							]
						},
						"description": ""
					},
					"response": []
				},
				{
					"name": "CLEAN UP - Slips 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c8ae14fe-a1af-49e0-b02a-aaad44ca3b15",
								"type": "text/javascript",
								"exec": [
									"// Clear Slips",
									"pm.environment.set(\"numSlips\", \"\");",
									"pm.environment.set(\"slipUrl\", \"\");",
									"",
									"// Clean up ",
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response has json body\", function () {",
									"    pm.response.to.not.be.error;",
									"    pm.response.to.have.jsonBody('');",
									"    pm.response.to.not.have.jsonBody('error');",
									"});",
									"",
									"var numSlips = Object.keys(pm.response.json()).length;",
									"if (numSlips === 0) {",
									"    postman.setNextRequest(\"TEST 1: GET /boats/\");",
									"    pm.environment.set(\"slipUrl\", \"\");",
									"    console.log(\"All Slips Deleted\");",
									"}",
									"else {",
									"    var slipUrl = pm.response.json()[0].url;",
									"    pm.environment.set(\"slipUrl\", slipUrl);",
									"    pm.expect(slipUrl).to.equal(pm.environment.get(\"slipUrl\"));",
									"    console.log(\"More Slips: \" + numSlips);",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{domain}}/boats/",
							"host": [
								"{{domain}}"
							],
							"path": [
								"boats",
								""
							]
						},
						"description": ""
					},
					"response": []
				}
			]
		},
		{
			"name": "Create & Read Boat",
			"description": "",
			"item": [
				{
					"name": "TEST 1: GET /boats/",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f90d39e1-e27a-42a0-84e1-11f19c12510b",
								"type": "text/javascript",
								"exec": [
									"// False until proven true",
									"pm.environment.set(\"test1\", false)",
									"",
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response has body\", function () {",
									"    pm.response.to.not.be.error;",
									"    pm.response.to.have.jsonBody('');",
									"    pm.response.to.not.have.jsonBody('error');",
									"});",
									"",
									"pm.test(\"response has 0 objects\", function () {",
									"    var length = Object.keys(pm.response.json()).length;",
									"    pm.expect(length).to.equal(0);",
									"});",
									"",
									"// Passes all tests",
									"pm.environment.set(\"test1\", true)"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "c7b56151-7869-459e-8e5d-6cc054919443",
								"type": "text/javascript",
								"exec": [
									"// Set environmental variables.",
									"",
									"pm.environment.set(\"test2name\", \"Boat Name\");",
									"pm.environment.set(\"test2type\", \"Boat Type\");",
									"pm.environment.set(\"test2length\", \"10\");",
									"",
									"",
									"pm.environment.set(\"test6name\", \"NEW Boat Name\");",
									"pm.environment.set(\"test6type\", \"NEW Boat Type\");",
									"pm.environment.set(\"test6length\", \"20\");"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{domain}}/boats/",
							"host": [
								"{{domain}}"
							],
							"path": [
								"boats",
								""
							]
						},
						"description": "Get all boats"
					},
					"response": []
				},
				{
					"name": "TEST 2: POST /boats/",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "df4a17e0-b56e-48b0-a90b-2048c8353016",
								"type": "text/javascript",
								"exec": [
									"// Initialize test2 response variables",
									"pm.environment.set(\"test2url\", null);",
									"pm.environment.set(\"test2id\", null);",
									"pm.environment.set(\"test2response\", null);",
									"",
									"pm.test(\"response is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"response has body\", function () {",
									"    pm.response.to.not.be.error;",
									"    pm.response.to.have.jsonBody('');",
									"    pm.response.to.not.have.jsonBody('error');",
									"});",
									"",
									"pm.test(\"response matches request\", function () {",
									"    exp_name = pm.environment.get(\"test2name\");",
									"    exp_type = pm.environment.get(\"test2type\");",
									"    exp_length = pm.environment.get(\"test2length\");",
									"    exp_at_sea = true;",
									"    ",
									"    res = pm.response.json();",
									"    pm.expect(res['name']).to.equal(exp_name);",
									"    pm.expect(res['type']).to.equal(exp_type);",
									"    pm.expect(res['length'].toString()).to.equal(exp_length);",
									"    pm.expect(res['at_sea']).to.equal(exp_at_sea);",
									"    ",
									"    // Save URL and ID",
									"    pm.environment.set(\"test2url\", res['url']);",
									"    pm.environment.set(\"test2id\", res['id']);",
									"    ",
									"    // Save response as string",
									"    res_string = JSON.stringify(res);",
									"    pm.environment.set(\"test2response\", res_string);",
									"});",
									"",
									"// Passes all tests and save data",
									"pm.environment.set(\"test1\", true)"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "046e8e06-8c44-4f5a-954a-2a766b1193ef",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"{{test2name}}\",\n  \"type\": \"{{test2type}}\",\n  \"length\": {{test2length}}\n}"
						},
						"url": {
							"raw": "{{domain}}/boats",
							"host": [
								"{{domain}}"
							],
							"path": [
								"boats"
							]
						},
						"description": "Get all boats"
					},
					"response": []
				},
				{
					"name": "TEST 3: GET {{test2url}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e1cf0846-b6f8-4a3b-8145-b002655b3658",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response has body\", function () {",
									"    pm.response.to.not.be.error;",
									"    pm.response.to.have.jsonBody('');",
									"    pm.response.to.not.have.jsonBody('error');",
									"});",
									"",
									"pm.test(\"response matches test2 data sent\", function () {",
									"    exp_name = pm.environment.get(\"test2name\");",
									"    exp_type = pm.environment.get(\"test2type\");",
									"    exp_length = pm.environment.get(\"test2length\");",
									"    exp_url = pm.environment.get(\"test2url\");",
									"    exp_id = pm.environment.get(\"test2id\");",
									"    exp_at_sea = true;",
									"    ",
									"    res = pm.response.json();",
									"    pm.expect(res['name']).to.equal(exp_name);",
									"    pm.expect(res['type']).to.equal(exp_type);",
									"    pm.expect(res['length'].toString()).to.equal(exp_length);",
									"    pm.expect(res['url']).to.equal(exp_url);",
									"    pm.expect(res['id'].toString()).to.equal(exp_id);",
									"    pm.expect(res['at_sea']).to.equal(exp_at_sea);",
									"",
									"    // Save At Sea Value",
									"    pm.environment.set(\"test2at_sea\", res['at_sea']);",
									"});"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "be88062d-bc4e-4271-9ec7-703a27004afa",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{test2url}}",
							"host": [
								"{{test2url}}"
							]
						},
						"description": "Test URL from test 2"
					},
					"response": []
				},
				{
					"name": "TEST 4: GET /boats/{{test2id}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "05b70c2e-70bb-4cec-b7f1-10c2a7c533b8",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response has body\", function () {",
									"    pm.response.to.not.be.error;",
									"    pm.response.to.have.jsonBody('');",
									"    pm.response.to.not.have.jsonBody('error');",
									"});",
									"",
									"pm.test(\"response matches test2 data sent\", function () {",
									"    exp_name = pm.environment.get(\"test2name\");",
									"    exp_type = pm.environment.get(\"test2type\");",
									"    exp_length = pm.environment.get(\"test2length\");",
									"    exp_url = pm.environment.get(\"test2url\");",
									"    exp_id = pm.environment.get(\"test2id\");",
									"    exp_at_sea = true;",
									"    ",
									"    res = pm.response.json();",
									"    pm.expect(res['name']).to.equal(exp_name);",
									"    pm.expect(res['type']).to.equal(exp_type);",
									"    pm.expect(res['length'].toString()).to.equal(exp_length);",
									"    pm.expect(res['url']).to.equal(exp_url);",
									"    pm.expect(res['id'].toString()).to.equal(exp_id);",
									"    pm.expect(res['at_sea']).to.equal(exp_at_sea);",
									"",
									"});"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "f6f611e5-875f-4b6e-838c-d13be0214f3b",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{domain}}/boats/{{test2id}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"boats",
								"{{test2id}}"
							]
						},
						"description": "Test id from test 2"
					},
					"response": []
				},
				{
					"name": "TEST 5: GET /boats/",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "dad8099f-3d64-49e7-b47b-8e61ef294f3d",
								"type": "text/javascript",
								"exec": [
									"pm.test('Test 1 was successful', function() {",
									"    var_test1 = pm.environment.get(\"test1\");",
									"    exp_test1 = 'true';",
									"    // console.log(\"expected \" + var_test1 + \" to be \" + exp_test1 );",
									"    ",
									"    pm.expect(exp_test1).to.equal('true');",
									"});",
									"",
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response has body\", function () {",
									"    pm.response.to.not.be.error;",
									"    pm.response.to.have.jsonBody('');",
									"    pm.response.to.not.have.jsonBody('error');",
									"});",
									"",
									"pm.test(\"response has 1 element that matches test2 data\", function () {",
									"    exp_name = pm.environment.get(\"test2name\");",
									"    exp_type = pm.environment.get(\"test2type\");",
									"    exp_length = pm.environment.get(\"test2length\");",
									"    exp_url = pm.environment.get(\"test2url\");",
									"    exp_id = pm.environment.get(\"test2id\");",
									"    exp_at_sea = true;",
									"    ",
									"    // Test",
									"    res = pm.response.json();",
									"    boat = res[0];",
									"    pm.expect(boat['name']).to.equal(exp_name);",
									"    pm.expect(boat['type']).to.equal(exp_type);",
									"    pm.expect(boat['length'].toString()).to.equal(exp_length);",
									"    pm.expect(boat['url']).to.equal(exp_url);",
									"    pm.expect(boat['id'].toString()).to.equal(exp_id);",
									"    pm.expect(boat['at_sea']).to.equal(exp_at_sea);",
									"",
									"});"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9932c7db-9467-43be-a22b-2531d369ad8e",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{domain}}/boats/",
							"host": [
								"{{domain}}"
							],
							"path": [
								"boats",
								""
							]
						},
						"description": "Ensure new boat added to list of all boats"
					},
					"response": []
				}
			]
		},
		{
			"name": "Edit Boat",
			"description": "",
			"item": [
				{
					"name": "TEST 6: PATCH /boats/{test2id}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d99b1368-ef52-4b48-befe-6a3150d6b6bc",
								"type": "text/javascript",
								"exec": [
									"// Initialize test2 response variables",
									"pm.environment.set(\"test6url\", null);",
									"pm.environment.set(\"test6id\", null);",
									"pm.environment.set(\"test6response\", null);",
									"",
									"pm.test(\"response is 200 ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response has body\", function () {",
									"    pm.response.to.not.be.error;",
									"    pm.response.to.have.jsonBody('');",
									"    pm.response.to.not.have.jsonBody('error');",
									"});",
									"",
									"pm.test(\"response matches request\", function () {",
									"    exp_name = pm.environment.get(\"test6name\");",
									"    exp_type = pm.environment.get(\"test6type\");",
									"    exp_length = pm.environment.get(\"test6length\");",
									"    exp_at_sea = true;",
									"    ",
									"    res = pm.response.json();",
									"    pm.expect(res['name']).to.equal(exp_name);",
									"    pm.expect(res['type']).to.equal(exp_type);",
									"    pm.expect(res['length'].toString()).to.equal(exp_length);",
									"    pm.expect(res['at_sea']).to.equal(exp_at_sea);",
									"    ",
									"    ",
									"    // Save response as string",
									"    res_string = JSON.stringify(res);",
									"    pm.environment.set(\"test6response\", res_string);",
									"});",
									"",
									"// Passes all tests and save data",
									"pm.environment.set(\"test1\", true)"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "046e8e06-8c44-4f5a-954a-2a766b1193ef",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"{{test6name}}\",\n  \"type\": \"{{test6type}}\",\n  \"length\": {{test6length}}\n}"
						},
						"url": {
							"raw": "{{domain}}/boats/{{test2id}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"boats",
								"{{test2id}}"
							]
						},
						"description": "Get all boats"
					},
					"response": []
				},
				{
					"name": "TEST 7: GET /boats/{{test2id}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "201c6cd2-087c-450a-9ff8-3f72ab754473",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"response is ok\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"response has body\", function () {",
									"    pm.response.to.not.be.error;",
									"    pm.response.to.have.jsonBody('');",
									"    pm.response.to.not.have.jsonBody('error');",
									"});",
									"",
									"pm.test(\"response matches test 6 data sent\", function () {",
									"    exp_name = pm.environment.get(\"test6name\");",
									"    exp_type = pm.environment.get(\"test6type\");",
									"    exp_length = pm.environment.get(\"test6length\");",
									"    exp_url = pm.environment.get(\"test2url\");",
									"    exp_id = pm.environment.get(\"test2id\");",
									"    exp_at_sea = pm.environment.get(\"test2at_sea\");",
									"    ",
									"    res = pm.response.json();",
									"    pm.expect(res['name']).to.equal(exp_name);",
									"    pm.expect(res['type']).to.equal(exp_type);",
									"    pm.expect(res['length'].toString()).to.equal(exp_length);",
									"    pm.expect(res['url']).to.equal(exp_url);",
									"    pm.expect(res['id'].toString()).to.equal(exp_id);",
									"    pm.expect(res['at_sea'].toString()).to.equal(exp_at_sea.toString());",
									"});"
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "f6f611e5-875f-4b6e-838c-d13be0214f3b",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {},
						"url": {
							"raw": "{{domain}}/boats/{{test2id}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"boats",
								"{{test2id}}"
							]
						},
						"description": "Check Boat Updated Correctly in TEST 6"
					},
					"response": []
				}
			]
		}
	]
}